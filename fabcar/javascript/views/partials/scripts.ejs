<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    $(document).ready(function () {
        M.AutoInit();

        
        document.getElementById("profilebtn").onclick = function () {
            location.href = "/profile";
        };
        $(".dropdown-trigger").dropdown({ constrainWidth: false,isScrollable:true });
    });

    function buyDeviceNotify(buyer, owner, deviceId) {
        console.log(buyer, owner, deviceId);
        let dbRefObject = firebase.database().ref().child('notifications')
        let t = new Date().toUTCString()
        data = {
            task:'buyDevice',
            user: buyer,
            deviceId: deviceId
        }
        dbRefObject.child(owner).child(t).set(data)


    }
    function getDataNotify(user, owner, deviceId) {
        console.log(user, owner, deviceId);
        let dbRefObject = firebase.database().ref().child('notifications')
        let t = new Date().toUTCString()
        data = {
            task:'getData',
            user: user,
            deviceId: deviceId
        }
        dbRefObject.child(owner).child(t).set(data)


    }
    function getNotifications(name) {
        let dbRefObject = firebase.database().ref().child('notifications').child(name).orderByKey()
        notifications=[]
        dbRefObject.once('value', (snap) => {
            
            snap.forEach((childSnap)=>{
                // console.log(ci)
                notifications.push(childSnap.val())
            })
            // var ul=document.getElementById('notifications')
            // console.log(ul);
            
            // notifications.forEach(element => {
            //     console.log(element);
            //     var li=document.createElement('li')
            //     li.innerText=JSON.stringify(element)
            //     ul.append(li)
                
            // });

            
            
            

        })
    }
    function buyPi(deviceId,owner,buyer){
        var buyPiFormDeviceId=document.getElementById('buyPiFormDeviceId')
        buyPiFormDeviceId.value=deviceId
        var buyPiFormOwnerId=document.getElementById('buyPiFormOwnerId')
        buyPiFormOwnerId.value=owner
        var buyPiFormDeviceId=document.getElementById('buyPiFormBuyerId')
        buyPiFormDeviceId.value=buyer
    
    }
    function getData(deviceId,owner,buyer){
        var getDataFormDeviceId=document.getElementById('getDataFormDeviceId')
        getDataFormDeviceId.value=deviceId
        var bgetDataFormOwnerId=document.getElementById('getDataFormOwnerId')
        getDataFormOwnerId.value=owner
        var getDataFormDeviceId=document.getElementById('getDataFormBuyerId')
        getDataFormDeviceId.value=buyer
    
    }
    function homebtn() {
        location.href = "/";
    }
    function logoutbtn() {
        location.href = "/logout";
    }
    
</script>
<script src="../../scripts/firebasertbd.js"></script>